<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>
    <script>

        const choices = ["Rock", "Paper", "Scissors"];
        const beatingChoices = [3, 1, 2];

        function computerPlay() {
            return Math.floor((Math.random() * 3) +1 );
        }

        function decideGame(playerSelection, computerSelection) {
            if (beatingChoices[playerSelection -1] == computerSelection) {
                return "Player";
            } else if (beatingChoices[computerSelection -1] == playerSelection) {
                return "Computer";
            } else {
                return "No one";
            }
        }

        function game(count) {
            let playerScore = 0;
            let computerScore = 0;

            for (let i = 0; i < count; i++) {

                let input = null;
                let playerChoice = -1;

                while (input == null || playerChoice == -1) {
                    input = prompt("Make your choice (Rock, Paper or Scissors):");
                    if (input == null) continue;

                    for (let i = 0; i < choices.length; i++) {
                        if(choices[i].toUpperCase() === input.toUpperCase()){
                            playerChoice = i;
                            break;
                        }
                    }

                }

                const computerChoice = computerPlay();
                const roundWinner = decideGame(playerChoice, computerChoice);
                console.log(computerChoice);
                switch (roundWinner) {
                    case "Player":
                        playerScore++;
                        break;
                    case "Computer":
                        computerScore++;
                        break;
                }

                console.log(`Computer chose ${choices[computerChoice]} ${roundWinner} wins round. Player: ${playerScore} | Computer: ${computerScore}`);

            }

            console.log(`Game ends after ${count} rounds.`)
            console.log(
                playerScore == computerScore ? "The match is tied."
                : (playerScore > computerScore ? "Player" : "Computer") + " wins the match!"
            );

        }

        game(5);

    </script>
</body>
</html>